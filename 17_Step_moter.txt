[배경 지식]

스텝 모터는 정교한 회전각 제어에 사용, 한 스텝에 몇 도를 회전하는지 정해져 있음.
정확한 회전 각으로 제어, 속도가 빠르지 않아도 되는 경우, 충분한 전류가 공급되는 경우에 사용

종류에 따라 2선식, 4선식으로 나뉨.
*6선식은 4선식에서 공통 단자 2개가 추가되었는데, 4선식과 동작 방식이 같다.
 공통 단자 2개에는 HIGH 신호를 출력한다. (데이터시트)

한 스텝에 하나의 핀으로 전류를 보내거나, 두개의 핀으로 전류를 보내는 방법이 있음
하나의 핀:
    4개의 핀에 차례로 한 번씩 HIGH신호를 보내면 된다. 나머진 LOW 유지.
    예시) A(black) -> B(Red) -> /A(Green) -> /B(Blue)
          8번핀       9번핀      10번핀       11번핀
    총 4스텝 소요. 스텝마다의 딜레이가 짧을수록 속도가 빨라진다.
    순서를 반대로 하면 반대 방향으로 회전한다.
    

*스텝 딜레이 * 360도 도는데 소요되는 스텝 * 초 변환 : RPM
*스텝 모터는 전류를 많이 먹으므로 아두이노에 외부 전원을 따로 연결하는 것이 좋다. 또는 모터드라이브
*스텝 딜레이가 너무 빠르거나 느리면, 모터가 제대로 동작 안함. 탈조현상


[참고]
1상 여자 방식: 하나의 핀에만 신호 주는 방식, 소모 전류와 온도 상승이 적고, 낮은 전원 용량 필요
2상 여자 방식: 두 개의 핀에 신호, 2배의 전류가 흐르지만 회전이 안정적이고 탈조현상이 적다.
1-2상 여자 방식: 1상과 2상이 스텝마다 번갈아 가면서 반복. 한 스텝당 회전하는 각도가 1,2상의 절반이다.

*여자 방식: 자기장을 이용하여 모터를 구동하는 방식, HIGH와 LOW를 번갈아가면서 주면 자기장이 발생.


[예제]
int stepCnt = 360 / 1.8;    // 360도를 회전하기 위해 필요한 스텝 수, 스텝당 1.8도는 스텝 모터의 고유 특성
int stepDelay = 5;

void setup() {
    pinMode(6, OUTPUT);
    ...
    pinMode(11, OUTPUT);

    digitalWrite(6, HIGH);  // 6선식 공통 단자는 HIGH를 출력
    digitalWrite(7, HIGH);
}

void loop() {
    for (int i = 0; i < stepCnt / 4; i++) {
        // 한 스텝, 하나의 핀에 전류를 흘려 보냄
        digitalWrite(8, HIGH);
        digitalWrite(9, LOW);
        digitalWrite(10, LOW);
        digitalWrite(11, LOW);
        delay(stepDelay);   // delay가 작을수록 빠르다. 5밀리초 * 200스텝 = 1초, 1분에 60바퀴를 도므로 60RPM

        ...
        // 각 핀에 차례대로 전류 보내기. 총 4스텝
    }
    delay(3000);
}